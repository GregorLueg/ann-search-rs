## Standard indices benchmarks and parameter gridsearch

Below are all of the standard indices shown and their performance. These
are run via:

```bash
# Run with default parameters
cargo run --example gridsearch_<INDEX> --release -- --distance euclidean

# Override specific parameters
cargo run --example gridsearch_<INDEX> --release -- --distance cosine

# Available parameters with their defaults:
# --n-cells 150_000
# --dim 32
# --n-clusters 25
# --k 15
# --seed 42
# --distance cosine
# --data gaussian
```

If you wish to run all of them, you can just run:

```bash
bash ./examples/run_benchmarks.sh --standard
```

### Annoy

Approximate nearest neighbours Oh Yeah. A tree-based method for vector searches.
Fast index building and good query speed. The size of the index however 
increases quite drastically the increased number of trees. 

**Key parameters:**

- *Number of trees (nt)*: The number of trees to generate in the forest
- *Search budget (s)*: The search budget per tree. If set to auto it uses
  `k * n_trees * 20`; versions with a `10x` or `5x` (i.e., less) are also shown.

Self is queried with the default search budget.

<details>
<summary><b>Annoy - Euclidean (Gaussian)</b>:</summary>
<pre><code>
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.21     2_350.81     2_354.02       1.0000     0.000000        18.31
Exhaustive (self)                                     3.21    23_238.47    23_241.67       1.0000     0.000000        18.31
Annoy-nt5-s:auto (query)                             75.49       119.15       194.64       0.6834    40.648110        33.67
Annoy-nt5-s:10x (query)                              75.49        57.14       132.63       0.5240    40.565845        33.67
Annoy-nt5-s:5x (query)                               75.49        36.03       111.52       0.3732    40.431273        33.67
Annoy-nt5 (self)                                     75.49       900.10       975.59       0.6838    40.084992        33.67
Annoy-nt10-s:auto (query)                           106.36       169.65       276.02       0.8810    40.727710        49.03
Annoy-nt10-s:10x (query)                            106.36       106.73       213.09       0.7412    40.683223        49.03
Annoy-nt10-s:5x (query)                             106.36        66.57       172.94       0.5626    40.594216        49.03
Annoy-nt10 (self)                                   106.36     1_687.77     1_794.13       0.8804    40.163717        49.03
Annoy-nt15-s:auto (query)                           153.18       241.72       394.90       0.9524    40.748981        49.65
Annoy-nt15-s:10x (query)                            153.18       155.48       308.66       0.8546    40.723903        49.65
Annoy-nt15-s:5x (query)                             153.18        97.11       250.29       0.6907    40.662767        49.65
Annoy-nt15 (self)                                   153.18     2_415.14     2_568.32       0.9516    40.184645        49.65
Annoy-nt25-s:auto (query)                           241.19       357.15       598.34       0.9908    40.758739        80.37
Annoy-nt25-s:10x (query)                            241.19       238.03       479.22       0.9508    40.750722        80.37
Annoy-nt25-s:5x (query)                             241.19       145.40       386.59       0.8410    40.720771        80.37
Annoy-nt25 (self)                                   241.19     3_557.66     3_798.85       0.9906    40.194411        80.37
Annoy-nt50-s:auto (query)                           447.88       586.98     1_034.87       0.9997    40.760798       142.43
Annoy-nt50-s:10x (query)                            447.88       414.37       862.25       0.9957    40.760169       142.43
Annoy-nt50-s:5x (query)                             447.88       276.64       724.53       0.9644    40.754108       142.43
Annoy-nt50 (self)                                   447.88     5_870.01     6_317.89       0.9997    40.196443       142.43
Annoy-nt75-s:auto (query)                           664.56       853.30     1_517.86       1.0000    40.760868       177.49
Annoy-nt75-s:10x (query)                            664.56       618.60     1_283.16       0.9995    40.760801       177.49
Annoy-nt75-s:5x (query)                             664.56       412.71     1_077.27       0.9912    40.759442       177.49
Annoy-nt75 (self)                                   664.56     8_523.23     9_187.79       1.0000    40.196503       177.49
Annoy-nt100-s:auto (query)                          871.80     1_084.39     1_956.19       1.0000    40.760873       266.55
Annoy-nt100-s:10x (query)                           871.80       778.07     1_649.87       0.9999    40.760864       266.55
Annoy-nt100-s:5x (query)                            871.80       541.85     1_413.65       0.9975    40.760539       266.55
Annoy-nt100 (self)                                  871.80    10_826.24    11_698.04       1.0000    40.196506       266.55
---------------------------------------------------------------------------------------------------------------------------
</code></pre>
</details>

---

<details>
<summary><b>Annoy - Cosine (Gaussian)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    4.11     2_410.60     2_414.71       1.0000     0.000000        18.88
Exhaustive (self)                                     4.11    24_553.56    24_557.67       1.0000     0.000000        18.88
Annoy-nt5-s:auto (query)                             73.78        36.77       110.55       0.3536     0.004314        32.62
Annoy-nt5-s:10x (query)                              73.78        36.18       109.97       0.3536     0.004314        32.62
Annoy-nt5-s:5x (query)                               73.78        33.92       107.70       0.3432     0.004456        32.62
Annoy-nt5 (self)                                     73.78       366.43       440.21       0.3540     0.004254        32.62
Annoy-nt10-s:auto (query)                           126.31        80.75       207.06       0.5411     0.002165        46.35
Annoy-nt10-s:10x (query)                            126.31        72.54       198.85       0.5411     0.002165        46.35
Annoy-nt10-s:5x (query)                             126.31        69.75       196.06       0.5329     0.002226        46.35
Annoy-nt10 (self)                                   126.31       711.47       837.78       0.5394     0.002140        46.35
Annoy-nt15-s:auto (query)                           169.70        97.87       267.57       0.6685     0.001280        46.96
Annoy-nt15-s:10x (query)                            169.70        93.96       263.66       0.6685     0.001280        46.96
Annoy-nt15-s:5x (query)                             169.70        88.07       257.77       0.6626     0.001312        46.96
Annoy-nt15 (self)                                   169.70     1_019.69     1_189.39       0.6668     0.001272        46.96
Annoy-nt25-s:auto (query)                           246.12       143.84       389.96       0.8222     0.000544        74.43
Annoy-nt25-s:10x (query)                            246.12       137.05       383.16       0.8222     0.000544        74.43
Annoy-nt25-s:5x (query)                             246.12       140.40       386.52       0.8195     0.000554        74.43
Annoy-nt25 (self)                                   246.12     1_416.24     1_662.35       0.8214     0.000537        74.43
Annoy-nt50-s:auto (query)                           459.15       288.11       747.26       0.9575     0.000095       129.99
Annoy-nt50-s:10x (query)                            459.15       292.49       751.64       0.9575     0.000095       129.99
Annoy-nt50-s:5x (query)                             459.15       330.55       789.70       0.9569     0.000096       129.99
Annoy-nt50 (self)                                   459.15     2_898.28     3_357.43       0.9573     0.000095       129.99
Annoy-nt75-s:auto (query)                           684.49       451.55     1_136.04       0.9887     0.000021       238.04
Annoy-nt75-s:10x (query)                            684.49       404.33     1_088.81       0.9887     0.000021       238.04
Annoy-nt75-s:5x (query)                             684.49       422.98     1_107.47       0.9885     0.000022       238.04
Annoy-nt75 (self)                                   684.49     4_207.86     4_892.35       0.9885     0.000022       238.04
Annoy-nt100-s:auto (query)                          888.12       523.18     1_411.30       0.9965     0.000006       241.09
Annoy-nt100-s:10x (query)                           888.12       541.08     1_429.20       0.9965     0.000006       241.09
Annoy-nt100-s:5x (query)                            888.12       585.03     1_473.15       0.9965     0.000006       241.09
Annoy-nt100 (self)                                  888.12     5_763.80     6_651.92       0.9964     0.000006       241.09
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>Annoy - Euclidean (Correlated)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.19     2_708.79     2_711.98       1.0000     0.000000        18.31
Exhaustive (self)                                     3.19    24_406.15    24_409.34       1.0000     0.000000        18.31
Annoy-nt5-s:auto (query)                             71.51        89.54       161.04       0.9572     1.221981        33.42
Annoy-nt5-s:10x (query)                              71.51        53.03       124.53       0.8678     1.213805        33.42
Annoy-nt5-s:5x (query)                               71.51        36.02       107.52       0.7232     1.195021        33.42
Annoy-nt5 (self)                                     71.51       882.46       953.97       0.9579     1.168924        33.42
Annoy-nt10-s:auto (query)                           101.19       219.02       320.21       0.9958     1.224682        48.53
Annoy-nt10-s:10x (query)                            101.19        95.58       196.77       0.9700     1.223103        48.53
Annoy-nt10-s:5x (query)                             101.19        69.80       170.99       0.8936     1.216710        48.53
Annoy-nt10 (self)                                   101.19     1_598.25     1_699.44       0.9957     1.171546        48.53
Annoy-nt15-s:auto (query)                           151.36       205.12       356.47       0.9994     1.224869        49.14
Annoy-nt15-s:10x (query)                            151.36       139.18       290.53       0.9918     1.224496        49.14
Annoy-nt15-s:5x (query)                             151.36        84.23       235.59       0.9543     1.222033        49.14
Annoy-nt15 (self)                                   151.36     2_046.97     2_198.33       0.9994     1.171736        49.14
Annoy-nt25-s:auto (query)                           246.24       299.06       545.30       1.0000     1.224900        79.37
Annoy-nt25-s:10x (query)                            246.24       210.04       456.29       0.9992     1.224866        79.37
Annoy-nt25-s:5x (query)                             246.24       132.86       379.10       0.9894     1.224366        79.37
Annoy-nt25 (self)                                   246.24     3_072.86     3_319.10       1.0000     1.171760        79.37
Annoy-nt50-s:auto (query)                           468.24       526.17       994.41       1.0000     1.224901       140.42
Annoy-nt50-s:10x (query)                            468.24       361.34       829.58       1.0000     1.224900       140.42
Annoy-nt50-s:5x (query)                             468.24       246.77       715.01       0.9995     1.224881       140.42
Annoy-nt50 (self)                                   468.24     5_281.32     5_749.56       1.0000     1.171761       140.42
Annoy-nt75-s:auto (query)                           660.29       908.74     1_569.03       1.0000     1.224901       259.47
Annoy-nt75-s:10x (query)                            660.29       570.42     1_230.71       1.0000     1.224901       259.47
Annoy-nt75-s:5x (query)                             660.29       394.11     1_054.40       1.0000     1.224900       259.47
Annoy-nt75 (self)                                   660.29     7_952.01     8_612.30       1.0000     1.171761       259.47
Annoy-nt100-s:auto (query)                          886.97       964.03     1_851.00       1.0000     1.224901       262.51
Annoy-nt100-s:10x (query)                           886.97       710.89     1_597.87       1.0000     1.224901       262.51
Annoy-nt100-s:5x (query)                            886.97       513.69     1_400.66       1.0000     1.224900       262.51
Annoy-nt100 (self)                                  886.97     9_790.02    10_676.99       1.0000     1.171761       262.51
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>Annoy - Euclidean (LowRank)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.49     2_578.80     2_582.29       1.0000     0.000000        18.31
Exhaustive (self)                                     3.49    24_890.25    24_893.74       1.0000     0.000000        18.31
Annoy-nt5-s:auto (query)                             72.25        77.59       149.84       0.9652     6.749119        32.42
Annoy-nt5-s:10x (query)                              72.25        72.28       144.53       0.8999     6.734509        32.42
Annoy-nt5-s:5x (query)                               72.25        33.97       106.22       0.7634     6.691552        32.42
Annoy-nt5 (self)                                     72.25       770.97       843.22       0.9642     6.682057        32.42
Annoy-nt10-s:auto (query)                           103.19       132.84       236.03       0.9976     6.754753        46.53
Annoy-nt10-s:10x (query)                            103.19        89.16       192.35       0.9828     6.752511        46.53
Annoy-nt10-s:5x (query)                             103.19        62.10       165.29       0.9212     6.740276        46.53
Annoy-nt10 (self)                                   103.19     1_372.70     1_475.89       0.9976     6.687908        46.53
Annoy-nt15-s:auto (query)                           155.33       223.25       378.58       0.9998     6.755016        47.14
Annoy-nt15-s:10x (query)                            155.33       127.04       282.37       0.9963     6.754601        47.14
Annoy-nt15-s:5x (query)                             155.33        82.39       237.72       0.9701     6.750474        47.14
Annoy-nt15 (self)                                   155.33     1_945.51     2_100.84       0.9998     6.688173        47.14
Annoy-nt25-s:auto (query)                           294.98       323.68       618.67       1.0000     6.755036        75.37
Annoy-nt25-s:10x (query)                            294.98       208.19       503.17       0.9997     6.755011        75.37
Annoy-nt25-s:5x (query)                             294.98       143.47       438.45       0.9946     6.754407        75.37
Annoy-nt25 (self)                                   294.98     2_928.13     3_223.12       1.0000     6.688195        75.37
Annoy-nt50-s:auto (query)                           461.13       485.12       946.24       1.0000     6.755037       132.42
Annoy-nt50-s:10x (query)                            461.13       351.76       812.89       1.0000     6.755037       132.42
Annoy-nt50-s:5x (query)                             461.13       257.85       718.97       0.9999     6.755027       132.42
Annoy-nt50 (self)                                   461.13     5_097.80     5_558.93       1.0000     6.688195       132.42
Annoy-nt75-s:auto (query)                           693.07       777.42     1_470.49       1.0000     6.755037       243.47
Annoy-nt75-s:10x (query)                            693.07       530.09     1_223.16       1.0000     6.755037       243.47
Annoy-nt75-s:5x (query)                             693.07       357.17     1_050.24       1.0000     6.755036       243.47
Annoy-nt75 (self)                                   693.07     7_163.48     7_856.55       1.0000     6.688195       243.47
Annoy-nt100-s:auto (query)                        1_043.55       925.37     1_968.92       1.0000     6.755037       246.52
Annoy-nt100-s:10x (query)                         1_043.55       683.89     1_727.44       1.0000     6.755037       246.52
Annoy-nt100-s:5x (query)                          1_043.55       484.13     1_527.68       1.0000     6.755037       246.52
Annoy-nt100 (self)                                1_043.55     9_178.79    10_222.34       1.0000     6.688195       246.52
---------------------------------------------------------------------------------------------------------------------------
```
</details>

### HNSW

Hierarchical navigatable small worlds. A graph-based index that needs more time
to build the index. However, fast query speed and compared to some other
approximate indices limited memory finger print.

**Key parameters:**

- *M (m)*: The number of connections between layers
- *EF construction (ef)*: The budget to generate good connections during 
  construction of the index.
- *EF search (s)*: The budget for the search queries. 

Self is queried with `s=100`.

<details>
<summary><b>HNSW - Euclidean (Gaussian)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.29     2_328.54     2_331.83       1.0000     0.000000        18.31
Exhaustive (self)                                     3.29    23_218.20    23_221.49       1.0000     0.000000        18.31
HNSW-M16-ef50-s50 (query)                         1_980.89        97.90     2_078.79       0.9608     0.652329        51.60
HNSW-M16-ef50-s75 (query)                         1_980.89       136.54     2_117.43       0.9786     0.522099        51.60
HNSW-M16-ef50-s100 (query)                        1_980.89       172.98     2_153.87       0.9864     0.468967        51.60
HNSW-M16-ef50 (self)                              1_980.89     1_721.79     3_702.68       0.9870     0.279307        51.60
HNSW-M16-ef100-s50 (query)                        3_160.36        98.90     3_259.27       0.9832     0.271282        51.60
HNSW-M16-ef100-s75 (query)                        3_160.36       139.50     3_299.87       0.9906     0.238876        51.60
HNSW-M16-ef100-s100 (query)                       3_160.36       176.44     3_336.81       0.9940     0.227811        51.60
HNSW-M16-ef100 (self)                             3_160.36     1_761.03     4_921.40       0.9943     0.136421        51.60
HNSW-M16-ef200-s50 (query)                        4_016.88        94.43     4_111.31       0.9942     0.289901        51.60
HNSW-M16-ef200-s75 (query)                        4_016.88       133.91     4_150.79       0.9967     0.281061        51.60
HNSW-M16-ef200-s100 (query)                       4_016.88       170.79     4_187.66       0.9976     0.279110        51.60
HNSW-M16-ef200 (self)                             4_016.88     1_705.76     5_722.64       0.9977     0.246769        51.60
HNSW-M24-ef100-s50 (query)                        6_588.45       153.92     6_742.37       0.9918     0.782136        51.60
HNSW-M24-ef100-s75 (query)                        6_588.45       171.68     6_760.13       0.9949     0.767092        51.60
HNSW-M24-ef100-s100 (query)                       6_588.45       206.61     6_795.06       0.9962     0.762621        51.60
HNSW-M24-ef100 (self)                             6_588.45     2_057.86     8_646.30       0.9962     0.614668        51.60
HNSW-M24-ef200-s50 (query)                        7_480.31       131.75     7_612.06       0.9952     1.999188        51.60
HNSW-M24-ef200-s75 (query)                        7_480.31       166.75     7_647.05       0.9960     1.993181        51.60
HNSW-M24-ef200-s100 (query)                       7_480.31       221.40     7_701.71       0.9963     1.990832        51.60
HNSW-M24-ef200 (self)                             7_480.31     2_086.04     9_566.35       0.9965     1.933509        51.60
HNSW-M24-ef300-s50 (query)                        8_300.27       123.14     8_423.41       0.9986     0.302784        51.60
HNSW-M24-ef300-s75 (query)                        8_300.27       168.39     8_468.66       0.9991     0.300996        51.60
HNSW-M24-ef300-s100 (query)                       8_300.27       211.72     8_511.99       0.9993     0.300415        51.60
HNSW-M24-ef300 (self)                             8_300.27     2_122.62    10_422.89       0.9994     0.251598        51.60
HNSW-M32-ef200-s50 (query)                       11_799.44       144.58    11_944.02       0.9981     0.658639        83.60
HNSW-M32-ef200-s75 (query)                       11_799.44       190.06    11_989.49       0.9987     0.576646        83.60
HNSW-M32-ef200-s100 (query)                      11_799.44       232.64    12_032.08       0.9990     0.536010        83.60
HNSW-M32-ef200 (self)                            11_799.44     2_333.67    14_133.11       0.9988     0.544378        83.60
HNSW-M32-ef300-s50 (query)                       12_676.76       152.02    12_828.77       0.9989     0.512648        83.60
HNSW-M32-ef300-s75 (query)                       12_676.76       190.35    12_867.11       0.9992     0.511205        83.60
HNSW-M32-ef300-s100 (query)                      12_676.76       234.00    12_910.76       0.9993     0.510794        83.60
HNSW-M32-ef300 (self)                            12_676.76     2_334.78    15_011.53       0.9992     0.467818        83.60
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>HNSW - Cosine (Gaussian)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    4.36     2_434.45     2_438.81       1.0000     0.000000        18.88
Exhaustive (self)                                     4.36    24_700.98    24_705.34       1.0000     0.000000        18.88
HNSW-M16-ef50-s50 (query)                         2_084.68       109.90     2_194.57       0.9625     0.000648        52.17
HNSW-M16-ef50-s75 (query)                         2_084.68       149.18     2_233.86       0.9793     0.000562        52.17
HNSW-M16-ef50-s100 (query)                        2_084.68       189.91     2_274.59       0.9869     0.000516        52.17
HNSW-M16-ef50 (self)                              2_084.68     1_751.87     3_836.54       0.9875     0.000320        52.17
HNSW-M16-ef100-s50 (query)                        3_381.53        96.55     3_478.08       0.9842     0.000235        52.17
HNSW-M16-ef100-s75 (query)                        3_381.53       136.54     3_518.06       0.9911     0.000166        52.17
HNSW-M16-ef100-s100 (query)                       3_381.53       175.05     3_556.58       0.9946     0.000155        52.17
HNSW-M16-ef100 (self)                             3_381.53     1_743.17     5_124.70       0.9945     0.000275        52.17
HNSW-M16-ef200-s50 (query)                        4_398.16       114.33     4_512.49       0.9921     0.001569        52.17
HNSW-M16-ef200-s75 (query)                        4_398.16       145.70     4_543.86       0.9946     0.001559        52.17
HNSW-M16-ef200-s100 (query)                       4_398.16       177.80     4_575.96       0.9955     0.001555        52.17
HNSW-M16-ef200 (self)                             4_398.16     1_765.18     6_163.34       0.9955     0.001636        52.17
HNSW-M24-ef100-s50 (query)                        6_728.45       119.29     6_847.74       0.9926     0.000411        52.17
HNSW-M24-ef100-s75 (query)                        6_728.45       173.46     6_901.91       0.9955     0.000403        52.17
HNSW-M24-ef100-s100 (query)                       6_728.45       205.61     6_934.07       0.9967     0.000399        52.17
HNSW-M24-ef100 (self)                             6_728.45     2_038.46     8_766.91       0.9972     0.000289        52.17
HNSW-M24-ef200-s50 (query)                        8_267.02       121.06     8_388.09       0.9967     0.000868        52.17
HNSW-M24-ef200-s75 (query)                        8_267.02       167.50     8_434.52       0.9976     0.000866        52.17
HNSW-M24-ef200-s100 (query)                       8_267.02       210.67     8_477.69       0.9978     0.000864        52.17
HNSW-M24-ef200 (self)                             8_267.02     2_073.61    10_340.63       0.9982     0.000735        52.17
HNSW-M24-ef300-s50 (query)                        8_648.07       151.43     8_799.49       0.9978     0.000775        52.17
HNSW-M24-ef300-s75 (query)                        8_648.07       167.46     8_815.52       0.9983     0.000774        52.17
HNSW-M24-ef300-s100 (query)                       8_648.07       221.20     8_869.27       0.9984     0.000773        52.17
HNSW-M24-ef300 (self)                             8_648.07     2_088.15    10_736.21       0.9985     0.000779        52.17
HNSW-M32-ef200-s50 (query)                       12_041.56       158.94    12_200.49       0.9971     0.001178        84.17
HNSW-M32-ef200-s75 (query)                       12_041.56       219.10    12_260.66       0.9975     0.001174        84.17
HNSW-M32-ef200-s100 (query)                      12_041.56       255.17    12_296.73       0.9976     0.001171        84.17
HNSW-M32-ef200 (self)                            12_041.56     2_450.19    14_491.75       0.9976     0.001165        84.17
HNSW-M32-ef300-s50 (query)                       13_106.20       159.78    13_265.98       0.9981     0.000867        84.17
HNSW-M32-ef300-s75 (query)                       13_106.20       210.69    13_316.89       0.9983     0.000865        84.17
HNSW-M32-ef300-s100 (query)                      13_106.20       247.47    13_353.67       0.9984     0.000865        84.17
HNSW-M32-ef300 (self)                            13_106.20     2_469.48    15_575.68       0.9985     0.000848        84.17
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>HNSW - Euclidean (Correlated)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.09     2_364.48     2_367.58       1.0000     0.000000        18.31
Exhaustive (self)                                     3.09    23_768.48    23_771.58       1.0000     0.000000        18.31
HNSW-M16-ef50-s50 (query)                         1_638.74        76.12     1_714.86       0.9983     0.584171        51.60
HNSW-M16-ef50-s75 (query)                         1_638.74       120.19     1_758.93       0.9990     0.583932        51.60
HNSW-M16-ef50-s100 (query)                        1_638.74       133.55     1_772.29       0.9993     0.583859        51.60
HNSW-M16-ef50 (self)                              1_638.74     1_320.50     2_959.24       0.9992     0.669204        51.60
HNSW-M16-ef100-s50 (query)                        2_677.76        75.49     2_753.24       0.9991     0.586092        51.60
HNSW-M16-ef100-s75 (query)                        2_677.76       105.26     2_783.02       0.9993     0.584963        51.60
HNSW-M16-ef100-s100 (query)                       2_677.76       133.83     2_811.59       0.9994     0.584606        51.60
HNSW-M16-ef100 (self)                             2_677.76     1_334.39     4_012.15       0.9994     0.577642        51.60
HNSW-M16-ef200-s50 (query)                        3_358.11        76.37     3_434.48       0.9999     0.000046        51.60
HNSW-M16-ef200-s75 (query)                        3_358.11       106.79     3_464.90       1.0000     0.000042        51.60
HNSW-M16-ef200-s100 (query)                       3_358.11       134.17     3_492.28       1.0000     0.000040        51.60
HNSW-M16-ef200 (self)                             3_358.11     1_345.36     4_703.47       0.9999     0.043962        51.60
HNSW-M24-ef100-s50 (query)                        5_064.45       100.66     5_165.11       0.9998     0.000207        51.60
HNSW-M24-ef100-s75 (query)                        5_064.45       123.27     5_187.72       0.9999     0.000164        51.60
HNSW-M24-ef100-s100 (query)                       5_064.45       154.18     5_218.63       0.9999     0.000142        51.60
HNSW-M24-ef100 (self)                             5_064.45     1_543.67     6_608.12       0.9999     0.008158        51.60
HNSW-M24-ef200-s50 (query)                        5_964.37        91.88     6_056.25       0.9995     0.641110        51.60
HNSW-M24-ef200-s75 (query)                        5_964.37       123.38     6_087.75       0.9995     0.641038        51.60
HNSW-M24-ef200-s100 (query)                       5_964.37       154.75     6_119.12       0.9995     0.641034        51.60
HNSW-M24-ef200 (self)                             5_964.37     1_539.37     7_503.74       0.9994     0.789370        51.60
HNSW-M24-ef300-s50 (query)                        6_439.29        93.63     6_532.92       0.9976     3.070052        51.60
HNSW-M24-ef300-s75 (query)                        6_439.29       130.58     6_569.87       0.9977     3.069990        51.60
HNSW-M24-ef300-s100 (query)                       6_439.29       154.41     6_593.70       0.9977     3.069990        51.60
HNSW-M24-ef300 (self)                             6_439.29     1_530.66     7_969.96       0.9968     4.156439        51.60
HNSW-M32-ef200-s50 (query)                        9_044.23       106.17     9_150.39       1.0000     0.000021        83.60
HNSW-M32-ef200-s75 (query)                        9_044.23       139.92     9_184.15       1.0000     0.000021        83.60
HNSW-M32-ef200-s100 (query)                       9_044.23       172.15     9_216.38       1.0000     0.000020        83.60
HNSW-M32-ef200 (self)                             9_044.23     1_712.26    10_756.49       1.0000     0.000035        83.60
HNSW-M32-ef300-s50 (query)                        9_759.78       105.94     9_865.72       1.0000     0.000067        83.60
HNSW-M32-ef300-s75 (query)                        9_759.78       140.38     9_900.16       1.0000     0.000067        83.60
HNSW-M32-ef300-s100 (query)                       9_759.78       172.26     9_932.05       1.0000     0.000067        83.60
HNSW-M32-ef300 (self)                             9_759.78     1_711.01    11_470.79       1.0000     0.000031        83.60
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>HNSW - Euclidean (LowRank)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.38     2_690.96     2_694.34       1.0000     0.000000        18.31
Exhaustive (self)                                     3.38    23_974.92    23_978.30       1.0000     0.000000        18.31
HNSW-M16-ef50-s50 (query)                         1_605.40        73.04     1_678.44       0.9466   712.774534        51.60
HNSW-M16-ef50-s75 (query)                         1_605.40       103.00     1_708.41       0.9538   641.430181        51.60
HNSW-M16-ef50-s100 (query)                        1_605.40       139.16     1_744.57       0.9616   560.403366        51.60
HNSW-M16-ef50 (self)                              1_605.40     1_327.68     2_933.08       0.9638   528.750354        51.60
HNSW-M16-ef100-s50 (query)                        2_646.91        84.14     2_731.05       0.9964    24.393407        51.60
HNSW-M16-ef100-s75 (query)                        2_646.91       102.93     2_749.84       0.9965    24.391989        51.60
HNSW-M16-ef100-s100 (query)                       2_646.91       129.05     2_775.96       0.9966    24.391965        51.60
HNSW-M16-ef100 (self)                             2_646.91     1_286.47     3_933.38       0.9959    28.692775        51.60
HNSW-M16-ef200-s50 (query)                        3_269.51        83.87     3_353.38       0.9966    24.394190        51.60
HNSW-M16-ef200-s75 (query)                        3_269.51       102.56     3_372.06       0.9966    24.392574        51.60
HNSW-M16-ef200-s100 (query)                       3_269.51       128.95     3_398.46       0.9966    24.391719        51.60
HNSW-M16-ef200 (self)                             3_269.51     1_291.69     4_561.19       0.9960    28.692415        51.60
HNSW-M24-ef100-s50 (query)                        4_952.37       110.74     5_063.11       0.9999     0.000500        51.60
HNSW-M24-ef100-s75 (query)                        4_952.37       130.16     5_082.53       1.0000     0.000421        51.60
HNSW-M24-ef100-s100 (query)                       4_952.37       150.25     5_102.62       1.0000     0.000413        51.60
HNSW-M24-ef100 (self)                             4_952.37     1_483.61     6_435.98       1.0000     0.000435        51.60
HNSW-M24-ef200-s50 (query)                        5_650.71        99.71     5_750.42       0.9997     3.040214        51.60
HNSW-M24-ef200-s75 (query)                        5_650.71       145.42     5_796.13       0.9997     3.039585        51.60
HNSW-M24-ef200-s100 (query)                       5_650.71       150.93     5_801.64       0.9997     3.039585        51.60
HNSW-M24-ef200 (self)                             5_650.71     1_492.51     7_143.22       0.9998     1.283824        51.60
HNSW-M24-ef300-s50 (query)                        6_328.07        89.24     6_417.31       1.0000     0.000003        51.60
HNSW-M24-ef300-s75 (query)                        6_328.07       160.95     6_489.02       1.0000     0.000000        51.60
HNSW-M24-ef300-s100 (query)                       6_328.07       151.50     6_479.57       1.0000     0.000000        51.60
HNSW-M24-ef300 (self)                             6_328.07     1_488.88     7_816.94       1.0000     0.000092        51.60
HNSW-M32-ef200-s50 (query)                        8_956.14       172.00     9_128.14       1.0000     0.000000        83.60
HNSW-M32-ef200-s75 (query)                        8_956.14       144.32     9_100.46       1.0000     0.000000        83.60
HNSW-M32-ef200-s100 (query)                       8_956.14       181.29     9_137.43       1.0000     0.000000        83.60
HNSW-M32-ef200 (self)                             8_956.14     1_661.43    10_617.57       1.0000     0.000103        83.60
HNSW-M32-ef300-s50 (query)                        9_569.61       138.05     9_707.66       0.9967     4.995632        83.60
HNSW-M32-ef300-s75 (query)                        9_569.61       140.35     9_709.95       0.9967     4.995632        83.60
HNSW-M32-ef300-s100 (query)                       9_569.61       197.33     9_766.93       0.9967     4.995632        83.60
HNSW-M32-ef300 (self)                             9_569.61     1_652.65    11_222.26       0.9963     5.747492        83.60
---------------------------------------------------------------------------------------------------------------------------
```
</details>

### IVF

Inverted file index. Uses Voronoi cells to sub-partition the original data.
Very small index size in memory.

**Key parameters:**

- *Number of lists (nl)*: The number of independent k-means cluster to generate.
  If the structure of the data is unknown, people use `sqrt(n)` as a heuristic.
- *Number of points (np)*: The number of clusters to probe during search. 
  Numbers here tend to be `sqrt(nlist)` or up to 5% of the nlist.

Self query was done with `2 * sqrt(nlist)`.

<details>
<summary><b>IVF - Euclidean (Gaussian)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.16     2_358.24     2_361.39       1.0000     0.000000        18.31
Exhaustive (self)                                     3.16    23_595.13    23_598.29       1.0000     0.000000        18.31
IVF-nl273-np13 (query)                            1_388.48       334.61     1_723.09       0.9889     0.034523        19.49
IVF-nl273-np16 (query)                            1_388.48       395.08     1_783.55       0.9967     0.006608        19.49
IVF-nl273-np23 (query)                            1_388.48       580.10     1_968.58       1.0000     0.000000        19.49
IVF-nl273 (self)                                  1_388.48     5_526.44     6_914.92       1.0000     0.000000        19.49
IVF-nl387-np19 (query)                            1_966.42       350.73     2_317.15       0.9926     0.031089        19.51
IVF-nl387-np27 (query)                            1_966.42       459.72     2_426.15       0.9998     0.000653        19.51
IVF-nl387 (self)                                  1_966.42     4_610.66     6_577.08       0.9998     0.000690        19.51
IVF-nl547-np23 (query)                            2_720.68       291.04     3_011.72       0.9882     0.041944        19.53
IVF-nl547-np27 (query)                            2_720.68       338.22     3_058.90       0.9958     0.014725        19.53
IVF-nl547-np33 (query)                            2_720.68       404.94     3_125.61       0.9997     0.001035        19.53
IVF-nl547 (self)                                  2_720.68     4_048.34     6_769.02       0.9997     0.001003        19.53
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>IVF - Cosine (Gaussian)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    4.23     2_434.63     2_438.86       1.0000     0.000000        18.88
Exhaustive (self)                                     4.23    24_505.26    24_509.49       1.0000     0.000000        18.88
IVF-nl273-np13 (query)                            1_471.32       327.25     1_798.56       0.9894     0.000025        20.06
IVF-nl273-np16 (query)                            1_471.32       394.34     1_865.66       0.9968     0.000006        20.06
IVF-nl273-np23 (query)                            1_471.32       561.67     2_032.99       1.0000     0.000000        20.06
IVF-nl273 (self)                                  1_471.32     5_601.52     7_072.84       1.0000     0.000000        20.06
IVF-nl387-np19 (query)                            2_192.13       365.88     2_558.01       0.9930     0.000019        20.08
IVF-nl387-np27 (query)                            2_192.13       468.92     2_661.05       0.9998     0.000000        20.08
IVF-nl387 (self)                                  2_192.13     4_577.51     6_769.64       0.9998     0.000000        20.08
IVF-nl547-np23 (query)                            2_921.49       289.29     3_210.78       0.9891     0.000025        20.10
IVF-nl547-np27 (query)                            2_921.49       334.57     3_256.06       0.9963     0.000009        20.10
IVF-nl547-np33 (query)                            2_921.49       429.11     3_350.60       0.9997     0.000001        20.10
IVF-nl547 (self)                                  2_921.49     3_968.68     6_890.17       0.9997     0.000001        20.10
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>IVF - Euclidean (Correlated)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.20     2_373.07     2_376.27       1.0000     0.000000        18.31
Exhaustive (self)                                     3.20    23_734.52    23_737.72       1.0000     0.000000        18.31
IVF-nl273-np13 (query)                            1_347.93       318.31     1_666.25       0.9998     0.000027        19.49
IVF-nl273-np16 (query)                            1_347.93       384.78     1_732.71       1.0000     0.000005        19.49
IVF-nl273-np23 (query)                            1_347.93       561.00     1_908.93       1.0000     0.000000        19.49
IVF-nl273 (self)                                  1_347.93     5_525.97     6_873.91       1.0000     0.000000        19.49
IVF-nl387-np19 (query)                            1_918.86       322.76     2_241.62       0.9999     0.000014        19.51
IVF-nl387-np27 (query)                            1_918.86       451.70     2_370.57       1.0000     0.000000        19.51
IVF-nl387 (self)                                  1_918.86     4_502.48     6_421.34       1.0000     0.000000        19.51
IVF-nl547-np23 (query)                            2_665.71       287.22     2_952.93       0.9999     0.000020        19.53
IVF-nl547-np27 (query)                            2_665.71       331.79     2_997.51       1.0000     0.000009        19.53
IVF-nl547-np33 (query)                            2_665.71       422.45     3_088.16       1.0000     0.000000        19.53
IVF-nl547 (self)                                  2_665.71     3_951.35     6_617.06       1.0000     0.000003        19.53
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>IVF - Euclidean (LowRank)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.27     2_356.28     2_359.56       1.0000     0.000000        18.31
Exhaustive (self)                                     3.27    23_621.50    23_624.78       1.0000     0.000000        18.31
IVF-nl273-np13 (query)                            1_342.95       314.74     1_657.69       1.0000     0.000014        19.49
IVF-nl273-np16 (query)                            1_342.95       374.40     1_717.35       1.0000     0.000000        19.49
IVF-nl273-np23 (query)                            1_342.95       521.71     1_864.66       1.0000     0.000000        19.49
IVF-nl273 (self)                                  1_342.95     5_162.34     6_505.29       1.0000     0.000000        19.49
IVF-nl387-np19 (query)                            1_944.97       321.85     2_266.82       1.0000     0.000000        19.51
IVF-nl387-np27 (query)                            1_944.97       460.58     2_405.54       1.0000     0.000000        19.51
IVF-nl387 (self)                                  1_944.97     4_399.03     6_344.00       1.0000     0.000000        19.51
IVF-nl547-np23 (query)                            2_628.11       289.01     2_917.13       1.0000     0.000000        19.53
IVF-nl547-np27 (query)                            2_628.11       329.54     2_957.66       1.0000     0.000000        19.53
IVF-nl547-np33 (query)                            2_628.11       396.50     3_024.61       1.0000     0.000000        19.53
IVF-nl547 (self)                                  2_628.11     3_918.51     6_546.62       1.0000     0.000000        19.53
---------------------------------------------------------------------------------------------------------------------------
```
</details>

### LSH

Locality sensitive hashing. Can be a very fast index, but with increasing
tables, the memory fingerprint does increase.

**Key parameters:**

- *Number of tables (nt)*: The number of independent hash tables to generate. 
  More tables improve recall at the cost of query time and memory.
- *Number of bits (nb)*: The bit resolution of the hash functions. Higher values 
  create finer partitions but may reduce collision rates.
- *Max candidates (s)*: The search budget limiting the number of candidates 
  examined. Set to 'auto' for full search or a fixed value (e.g., 5k) for faster 
  queries with lower recall.

<details>
<summary><b>LSH - Euclidean (Gaussian)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.11     2_355.46     2_358.58       1.0000     0.000000        18.31
Exhaustive (self)                                     3.11    23_859.91    23_863.03       1.0000     0.000000        18.31
LSH-nt10-nb8-s:auto (query)                          58.22       694.33       752.55       0.9880     0.150786        34.90
LSH-nt10-nb8-s:5k (query)                            58.22       338.16       396.38       0.8853     0.682000        34.90
LSH-nt10-nb8 (self)                                  58.22     6_928.84     6_987.06       0.9879     0.148408        34.90
LSH-nt20-nb8-s:auto (query)                         104.81     1_012.53     1_117.34       0.9990     0.011816        51.65
LSH-nt20-nb8-s:5k (query)                           104.81       341.48       446.28       0.8866     0.657057        51.65
LSH-nt20-nb8 (self)                                 104.81    10_149.14    10_253.95       0.9990     0.010957        51.65
LSH-nt25-nb8-s:auto (query)                         133.63     1_161.74     1_295.37       0.9997     0.003853        59.86
LSH-nt25-nb8-s:5k (query)                           133.63       356.82       490.45       0.8866     0.657057        59.86
LSH-nt25-nb8 (self)                                 133.63    11_720.27    11_853.90       0.9996     0.003632        59.86
LSH-nt10-nb10-s:auto (query)                         73.16       529.56       602.71       0.9699     0.414554        35.55
LSH-nt10-nb10-s:5k (query)                           73.16       296.77       369.92       0.8848     0.679656        35.55
LSH-nt10-nb10 (self)                                 73.16     5_310.01     5_383.16       0.9700     0.407188        35.55
LSH-nt20-nb10-s:auto (query)                        134.27       747.40       881.67       0.9951     0.060176        52.62
LSH-nt20-nb10-s:5k (query)                          134.27       333.16       467.43       0.8992     0.425955        52.62
LSH-nt20-nb10 (self)                                134.27     7_899.26     8_033.53       0.9949     0.061070        52.62
LSH-nt25-nb10-s:auto (query)                        179.32       948.39     1_127.71       0.9974     0.030311        61.37
LSH-nt25-nb10-s:5k (query)                          179.32       328.05       507.37       0.8997     0.417316        61.37
LSH-nt25-nb10 (self)                                179.32     8_444.32     8_623.63       0.9973     0.031546        61.37
LSH-nt10-nb12-s:auto (query)                        112.79       493.95       606.74       0.9411     0.804150        36.34
LSH-nt10-nb12-s:5k (query)                          112.79       351.94       464.73       0.8786     0.967038        36.34
LSH-nt10-nb12 (self)                                112.79     4_907.65     5_020.44       0.9420     0.793338        36.34
LSH-nt20-nb12-s:auto (query)                        172.79       666.24       839.04       0.9844     0.197321        54.65
LSH-nt20-nb12-s:5k (query)                          172.79       300.50       473.30       0.9095     0.422210        54.65
LSH-nt20-nb12 (self)                                172.79     6_150.14     6_322.94       0.9842     0.200060        54.65
LSH-nt25-nb12-s:auto (query)                        204.56       673.77       878.33       0.9906     0.118465        63.59
LSH-nt25-nb12-s:5k (query)                          204.56       303.73       508.29       0.9133     0.361454        63.59
LSH-nt25-nb12 (self)                                204.56     6_743.06     6_947.62       0.9903     0.122014        63.59
LSH-nt10-nb16-s:auto (query)                        122.09       315.34       437.43       0.8498     2.429547        39.68
LSH-nt10-nb16-s:5k (query)                          122.09       226.85       348.94       0.8060     2.509321        39.68
LSH-nt10-nb16 (self)                                122.09     3_164.97     3_287.06       0.8527     2.402690        39.68
LSH-nt20-nb16-s:auto (query)                        215.67       475.71       691.38       0.9416     0.933309        60.83
LSH-nt20-nb16-s:5k (query)                          215.67       264.77       480.44       0.8775     1.076314        60.83
LSH-nt20-nb16 (self)                                215.67     4_764.02     4_979.70       0.9422     0.931024        60.83
LSH-nt25-nb16-s:auto (query)                        277.85       527.60       805.46       0.9589     0.613957        71.67
LSH-nt25-nb16-s:5k (query)                          277.85       271.62       549.47       0.8914     0.770405        71.67
LSH-nt25-nb16 (self)                                277.85     5_295.54     5_573.39       0.9588     0.626807        71.67
LSH-nt50-nb16-s:auto (query)                        511.00       761.15     1_272.16       0.9856     0.188848       125.67
LSH-nt50-nb16-s:5k (query)                          511.00       289.63       800.63       0.9138     0.365119       125.67
LSH-nt50-nb16 (self)                                511.00     8_015.00     8_526.00       0.9856     0.191776       125.67
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>LSH - Cosine (Gaussian)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    4.26     2_435.52     2_439.78       1.0000     0.000000        18.88
Exhaustive (self)                                     4.26    24_485.98    24_490.24       1.0000     0.000000        18.88
LSH-nt10-nb8-s:auto (query)                          33.85       848.02       881.87       0.9942     0.000049        35.39
LSH-nt10-nb8-s:5k (query)                            33.85       349.04       382.89       0.8717     0.000877        35.39
LSH-nt10-nb8 (self)                                  33.85     8_546.21     8_580.05       0.9945     0.000045        35.39
LSH-nt20-nb8-s:auto (query)                          55.52     1_470.60     1_526.12       0.9997     0.000002        52.15
LSH-nt20-nb8-s:5k (query)                            55.52       352.21       407.73       0.8719     0.000875        52.15
LSH-nt20-nb8 (self)                                  55.52    15_462.45    15_517.97       0.9998     0.000002        52.15
LSH-nt25-nb8-s:auto (query)                          72.38     1_782.02     1_854.40       0.9999     0.000001        60.44
LSH-nt25-nb8-s:5k (query)                            72.38       350.97       423.34       0.8719     0.000875        60.44
LSH-nt25-nb8 (self)                                  72.38    17_564.01    17_636.38       0.9999     0.000000        60.44
LSH-nt10-nb10-s:auto (query)                         39.52       602.23       641.75       0.9806     0.000171        35.60
LSH-nt10-nb10-s:5k (query)                           39.52       321.89       361.41       0.8911     0.000557        35.60
LSH-nt10-nb10 (self)                                 39.52     6_038.03     6_077.55       0.9808     0.000167        35.60
LSH-nt20-nb10-s:auto (query)                         64.63       926.02       990.65       0.9983     0.000015        52.16
LSH-nt20-nb10-s:5k (query)                           64.63       338.23       402.86       0.8971     0.000485        52.16
LSH-nt20-nb10 (self)                                 64.63     9_239.82     9_304.44       0.9982     0.000015        52.16
LSH-nt25-nb10-s:auto (query)                         86.60     1_054.35     1_140.95       0.9993     0.000006        60.48
LSH-nt25-nb10-s:5k (query)                           86.60       328.04       414.64       0.8972     0.000484        60.48
LSH-nt25-nb10 (self)                                 86.60    10_546.10    10_632.70       0.9992     0.000006        60.48
LSH-nt10-nb12-s:auto (query)                         51.37       465.09       516.46       0.9611     0.000315        36.15
LSH-nt10-nb12-s:5k (query)                           51.37       299.58       350.94       0.9018     0.000467        36.15
LSH-nt10-nb12 (self)                                 51.37     4_677.95     4_729.31       0.9610     0.000310        36.15
LSH-nt20-nb12-s:auto (query)                         77.13       676.57       753.70       0.9922     0.000067        53.47
LSH-nt20-nb12-s:5k (query)                           77.13       319.69       396.82       0.9170     0.000288        53.47
LSH-nt20-nb12 (self)                                 77.13     6_834.42     6_911.56       0.9921     0.000067        53.47
LSH-nt25-nb12-s:auto (query)                        106.88       762.79       869.67       0.9961     0.000032        62.17
LSH-nt25-nb12-s:5k (query)                          106.88       316.52       423.40       0.9188     0.000267        62.17
LSH-nt25-nb12 (self)                                106.88     7_666.54     7_773.42       0.9961     0.000032        62.17
LSH-nt10-nb16-s:auto (query)                         66.82       355.44       422.26       0.9026     0.001020        37.78
LSH-nt10-nb16-s:5k (query)                           66.82       251.88       318.70       0.8499     0.001106        37.78
LSH-nt10-nb16 (self)                                 66.82     3_587.40     3_654.22       0.9040     0.000995        37.78
LSH-nt20-nb16-s:auto (query)                        105.64       519.30       624.95       0.9637     0.000366        57.16
LSH-nt20-nb16-s:5k (query)                          105.64       272.36       378.01       0.8909     0.000507        57.16
LSH-nt20-nb16 (self)                                105.64     5_230.51     5_336.15       0.9641     0.000362        57.16
LSH-nt25-nb16-s:auto (query)                        136.15       582.38       718.52       0.9750     0.000244        66.61
LSH-nt25-nb16-s:5k (query)                          136.15       276.32       412.47       0.9002     0.000391        66.61
LSH-nt25-nb16 (self)                                136.15     5_846.46     5_982.61       0.9748     0.000247        66.61
LSH-nt50-nb16-s:auto (query)                        246.32       835.06     1_081.38       0.9948     0.000043       114.52
LSH-nt50-nb16-s:5k (query)                          246.32       290.09       536.41       0.9167     0.000208       114.52
LSH-nt50-nb16 (self)                                246.32     8_317.77     8_564.09       0.9947     0.000043       114.52
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>LSH - Euclidean (Correlated)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.19     2_389.27     2_392.46       1.0000     0.000000        18.31
Exhaustive (self)                                     3.19    23_710.10    23_713.29       1.0000     0.000000        18.31
LSH-nt10-nb8-s:auto (query)                          58.40       889.46       947.87       1.0000     0.000000        34.97
LSH-nt10-nb8-s:5k (query)                            58.40       403.69       462.09       0.9559     0.026591        34.97
LSH-nt10-nb8 (self)                                  58.40     8_904.11     8_962.52       1.0000     0.000000        34.97
LSH-nt20-nb8-s:auto (query)                         103.65     1_454.03     1_557.68       1.0000     0.000000        51.56
LSH-nt20-nb8-s:5k (query)                           103.65       431.37       535.03       0.9559     0.026591        51.56
LSH-nt20-nb8 (self)                                 103.65    14_623.19    14_726.84       1.0000     0.000000        51.56
LSH-nt25-nb8-s:auto (query)                         130.59     1_861.53     1_992.12       1.0000     0.000000        60.01
LSH-nt25-nb8-s:5k (query)                           130.59       487.75       618.34       0.9559     0.026591        60.01
LSH-nt25-nb8 (self)                                 130.59    16_892.23    17_022.82       1.0000     0.000000        60.01
LSH-nt10-nb10-s:auto (query)                         82.65       766.99       849.64       1.0000     0.000000        34.90
LSH-nt10-nb10-s:5k (query)                           82.65       394.07       476.72       0.9752     0.016353        34.90
LSH-nt10-nb10 (self)                                 82.65     7_708.97     7_791.61       1.0000     0.000000        34.90
LSH-nt20-nb10-s:auto (query)                        144.36     1_108.68     1_253.03       1.0000     0.000000        51.80
LSH-nt20-nb10-s:5k (query)                          144.36       403.65       548.01       0.9752     0.016353        51.80
LSH-nt20-nb10 (self)                                144.36    10_747.96    10_892.32       1.0000     0.000000        51.80
LSH-nt25-nb10-s:auto (query)                        168.55     1_215.22     1_383.77       1.0000     0.000000        60.28
LSH-nt25-nb10-s:5k (query)                          168.55       388.92       557.46       0.9752     0.016353        60.28
LSH-nt25-nb10 (self)                                168.55    12_116.31    12_284.86       1.0000     0.000000        60.28
LSH-nt10-nb12-s:auto (query)                         86.41       725.80       812.21       1.0000     0.000000        35.16
LSH-nt10-nb12-s:5k (query)                           86.41       395.11       481.53       0.9635     0.019083        35.16
LSH-nt10-nb12 (self)                                 86.41     7_255.05     7_341.46       1.0000     0.000000        35.16
LSH-nt20-nb12-s:auto (query)                        154.31     1_047.29     1_201.61       1.0000     0.000000        51.78
LSH-nt20-nb12-s:5k (query)                          154.31       394.27       548.59       0.9635     0.019083        51.78
LSH-nt20-nb12 (self)                                154.31    10_413.58    10_567.90       1.0000     0.000000        51.78
LSH-nt25-nb12-s:auto (query)                        199.65     1_179.45     1_379.10       1.0000     0.000000        59.90
LSH-nt25-nb12-s:5k (query)                          199.65       379.38       579.03       0.9635     0.019083        59.90
LSH-nt25-nb12 (self)                                199.65    11_803.26    12_002.91       1.0000     0.000000        59.90
LSH-nt10-nb16-s:auto (query)                        106.78       662.36       769.14       1.0000     0.000017        35.10
LSH-nt10-nb16-s:5k (query)                          106.78       348.46       455.24       0.9574     0.022911        35.10
LSH-nt10-nb16 (self)                                106.78     6_964.09     7_070.87       1.0000     0.000013        35.10
LSH-nt20-nb16-s:auto (query)                        227.32       950.60     1_177.92       1.0000     0.000000        51.80
LSH-nt20-nb16-s:5k (query)                          227.32       357.90       585.22       0.9574     0.022911        51.80
LSH-nt20-nb16 (self)                                227.32     9_846.20    10_073.52       1.0000     0.000000        51.80
LSH-nt25-nb16-s:auto (query)                        276.16     1_066.03     1_342.19       1.0000     0.000000        60.12
LSH-nt25-nb16-s:5k (query)                          276.16       367.29       643.45       0.9574     0.022911        60.12
LSH-nt25-nb16 (self)                                276.16    10_810.39    11_086.55       1.0000     0.000000        60.12
LSH-nt50-nb16-s:auto (query)                        527.51     1_749.12     2_276.63       1.0000     0.000000       101.94
LSH-nt50-nb16-s:5k (query)                          527.51       384.22       911.73       0.9574     0.022911       101.94
LSH-nt50-nb16 (self)                                527.51    16_877.63    17_405.14       1.0000     0.000000       101.94
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>LSH - Euclidean (LowRank)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.17     2_502.35     2_505.52       1.0000     0.000000        18.31
Exhaustive (self)                                     3.17    27_088.88    27_092.05       1.0000     0.000000        18.31
LSH-nt10-nb8-s:auto (query)                          73.42     1_450.52     1_523.93       1.0000     0.000000        34.65
LSH-nt10-nb8-s:5k (query)                            73.42       525.81       599.23       0.9900     1.045677        34.65
LSH-nt10-nb8 (self)                                  73.42    15_540.25    15_613.66       1.0000     0.000000        34.65
LSH-nt20-nb8-s:auto (query)                         109.56     2_077.59     2_187.14       1.0000     0.000000        50.96
LSH-nt20-nb8-s:5k (query)                           109.56       453.87       563.42       0.9900     1.045677        50.96
LSH-nt20-nb8 (self)                                 109.56    21_606.56    21_716.12       1.0000     0.000000        50.96
LSH-nt25-nb8-s:auto (query)                         144.90     2_492.02     2_636.91       1.0000     0.000000        59.08
LSH-nt25-nb8-s:5k (query)                           144.90       582.95       727.84       0.9900     1.045677        59.08
LSH-nt25-nb8 (self)                                 144.90    25_062.56    25_207.45       1.0000     0.000000        59.08
LSH-nt10-nb10-s:auto (query)                         81.03     1_067.47     1_148.49       1.0000     0.000000        34.75
LSH-nt10-nb10-s:5k (query)                           81.03       507.39       588.42       0.9919     0.016708        34.75
LSH-nt10-nb10 (self)                                 81.03     9_902.01     9_983.04       1.0000     0.000000        34.75
LSH-nt20-nb10-s:auto (query)                        152.59     1_580.06     1_732.65       1.0000     0.000000        51.18
LSH-nt20-nb10-s:5k (query)                          152.59       361.99       514.58       0.9919     0.016708        51.18
LSH-nt20-nb10 (self)                                152.59    15_460.35    15_612.94       1.0000     0.000000        51.18
LSH-nt25-nb10-s:auto (query)                        166.80     2_160.75     2_327.55       1.0000     0.000000        59.42
LSH-nt25-nb10-s:5k (query)                          166.80       368.23       535.03       0.9919     0.016708        59.42
LSH-nt25-nb10 (self)                                166.80    17_604.63    17_771.43       1.0000     0.000000        59.42
LSH-nt10-nb12-s:auto (query)                         80.80       659.80       740.60       1.0000     0.000000        34.74
LSH-nt10-nb12-s:5k (query)                           80.80       368.55       449.35       0.9925     0.014356        34.74
LSH-nt10-nb12 (self)                                 80.80     6_852.25     6_933.05       1.0000     0.000000        34.74
LSH-nt20-nb12-s:auto (query)                        153.40     1_208.20     1_361.60       1.0000     0.000000        51.12
LSH-nt20-nb12-s:5k (query)                          153.40       370.90       524.29       0.9925     0.014356        51.12
LSH-nt20-nb12 (self)                                153.40    11_170.23    11_323.62       1.0000     0.000000        51.12
LSH-nt25-nb12-s:auto (query)                        202.63     1_428.47     1_631.10       1.0000     0.000000        59.30
LSH-nt25-nb12-s:5k (query)                          202.63       414.50       617.13       0.9925     0.014356        59.30
LSH-nt25-nb12 (self)                                202.63    13_297.26    13_499.89       1.0000     0.000000        59.30
LSH-nt10-nb16-s:auto (query)                        119.70       656.98       776.68       1.0000     0.000000        34.92
LSH-nt10-nb16-s:5k (query)                          119.70       361.59       481.29       0.9896     0.019635        34.92
LSH-nt10-nb16 (self)                                119.70     6_612.17     6_731.87       1.0000     0.000000        34.92
LSH-nt20-nb16-s:auto (query)                        225.67       965.69     1_191.36       1.0000     0.000000        51.67
LSH-nt20-nb16-s:5k (query)                          225.67       357.61       583.28       0.9896     0.019635        51.67
LSH-nt20-nb16 (self)                                225.67     9_006.70     9_232.37       1.0000     0.000000        51.67
LSH-nt25-nb16-s:auto (query)                        266.93     1_021.95     1_288.88       1.0000     0.000000        60.09
LSH-nt25-nb16-s:5k (query)                          266.93       356.94       623.87       0.9896     0.019635        60.09
LSH-nt25-nb16 (self)                                266.93    10_249.21    10_516.14       1.0000     0.000000        60.09
LSH-nt50-nb16-s:auto (query)                        503.17     1_655.58     2_158.76       1.0000     0.000000       101.98
LSH-nt50-nb16-s:5k (query)                          503.17       357.62       860.80       0.9896     0.019635       101.98
LSH-nt50-nb16 (self)                                503.17    16_549.05    17_052.22       1.0000     0.000000       101.98
---------------------------------------------------------------------------------------------------------------------------
```
</details>

### NNDescent

The NNDescent implementation in this crate, heavily inspired by the amazing
[PyNNDescent](https://github.com/lmcinnes/pynndescent), shows a very good
compromise between index building and fast querying. It's a great arounder
that reaches easily performance of 0.98 Recalls@k neighbours. You can even
heavily short cut the initialisation of the index with only 12 trees (instead
of 32) and get in 4 seconds to a recall 0.9 (compared to 48 seconds for 
exhaustive search)!

**Key parameters:**

- *Number of trees (nt)*: Number of trees to use for the initialisation. If set
  to auto, it defaults to 32.
- *Search budget (s)*: The search budget for the exploration of the graph during
  querying. Here it defaults to `k * 2` (with min 60, maximum 200).
- *Diversify probability (dp)*: This is based on the original papers leveraging
  NNDescent and it is supposed to remove redundant edges from the graph to
  increase query speed.

<details>
<summary><b>NNDescent - Euclidean (Gaussian)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.16     2_332.10     2_335.26       1.0000     0.000000        18.31
Exhaustive (self)                                     3.16    23_399.21    23_402.37       1.0000     0.000000        18.31
NNDescent-nt12-s:auto-dp0 (query)                 1_778.08        93.55     1_871.64       0.9689     0.102828       139.69
NNDescent-nt12-dp0 (self)                         1_778.08       922.06     2_700.15       0.9684     0.099935       139.69
NNDescent-nt24-s:auto-dp0 (query)                 2_474.05        91.30     2_565.36       0.9887     0.032393       170.66
NNDescent-nt24-dp0 (self)                         2_474.05       886.11     3_360.16       0.9886     0.031472       170.66
NNDescent-nt:auto-s75-dp0 (query)                 2_549.66       126.90     2_676.56       0.9942     0.016358       170.78
NNDescent-nt:auto-s100-dp0 (query)                2_549.66       165.21     2_714.87       0.9962     0.010879       170.78
NNDescent-nt:auto-s:auto-dp0 (query)              2_549.66        90.39     2_640.04       0.9895     0.029672       170.78
NNDescent-nt:auto-dp0 (self)                      2_549.66       886.85     3_436.51       0.9894     0.029051       170.78
NNDescent-nt:auto-s:auto-dp0.25 (query)           2_631.52        90.13     2_721.65       0.9895     0.029672       175.36
NNDescent-nt:auto-dp0.25 (self)                   2_631.52       872.33     3_503.85       0.9894     0.029051       175.36
NNDescent-nt:auto-s:auto-dp0.5 (query)            2_644.93        94.79     2_739.72       0.9895     0.029672       175.36
NNDescent-nt:auto-dp0.5 (self)                    2_644.93       902.23     3_547.17       0.9894     0.029051       175.36
NNDescent-nt:auto-s:auto-dp1 (query)              2_665.20        91.78     2_756.98       0.9895     0.029672       175.36
NNDescent-nt:auto-dp1 (self)                      2_665.20       912.97     3_578.17       0.9894     0.029051       175.36
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>NNDescent - Cosine (Gaussian)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    4.05     2_438.92     2_442.97       1.0000     0.000000        18.88
Exhaustive (self)                                     4.05    24_290.51    24_294.56       1.0000     0.000000        18.88
NNDescent-nt12-s:auto-dp0 (query)                 5_849.36        86.76     5_936.12       0.9996     0.000002       137.58
NNDescent-nt12-dp0 (self)                         5_849.36       852.15     6_701.51       0.9997     0.000001       137.58
NNDescent-nt24-s:auto-dp0 (query)                 5_353.12        89.71     5_442.84       0.9997     0.000001       165.29
NNDescent-nt24-dp0 (self)                         5_353.12       840.90     6_194.02       0.9998     0.000000       165.29
NNDescent-nt:auto-s75-dp0 (query)                 5_395.96       122.75     5_518.71       0.9998     0.000000       165.41
NNDescent-nt:auto-s100-dp0 (query)                5_395.96       158.81     5_554.77       0.9999     0.000000       165.41
NNDescent-nt:auto-s:auto-dp0 (query)              5_395.96        84.38     5_480.33       0.9997     0.000001       165.41
NNDescent-nt:auto-dp0 (self)                      5_395.96       831.63     6_227.59       0.9998     0.000000       165.41
NNDescent-nt:auto-s:auto-dp0.25 (query)           5_522.97        79.47     5_602.44       0.9894     0.000018       157.96
NNDescent-nt:auto-dp0.25 (self)                   5_522.97       772.95     6_295.92       0.9897     0.000017       157.96
NNDescent-nt:auto-s:auto-dp0.5 (query)            5_502.26        75.70     5_577.96       0.9806     0.000036       143.58
NNDescent-nt:auto-dp0.5 (self)                    5_502.26       735.16     6_237.42       0.9805     0.000035       143.58
NNDescent-nt:auto-s:auto-dp1 (query)              5_521.34        71.50     5_592.84       0.9602     0.000080       129.42
NNDescent-nt:auto-dp1 (self)                      5_521.34       685.74     6_207.08       0.9609     0.000078       129.42
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>NNDescent - Euclidean (Correlated)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.27     2_391.48     2_394.76       1.0000     0.000000        18.31
Exhaustive (self)                                     3.27    23_472.36    23_475.63       1.0000     0.000000        18.31
NNDescent-nt12-s:auto-dp0 (query)                 2_667.15        77.36     2_744.50       0.9991     0.000190       139.18
NNDescent-nt12-dp0 (self)                         2_667.15       750.44     3_417.59       0.9993     0.000172       139.18
NNDescent-nt24-s:auto-dp0 (query)                 3_154.69        78.98     3_233.67       0.9997     0.000025       169.65
NNDescent-nt24-dp0 (self)                         3_154.69       847.44     4_002.13       0.9999     0.000024       169.65
NNDescent-nt:auto-s75-dp0 (query)                 3_411.15       109.17     3_520.31       0.9999     0.000008       169.78
NNDescent-nt:auto-s100-dp0 (query)                3_411.15       136.36     3_547.51       0.9999     0.000005       169.78
NNDescent-nt:auto-s:auto-dp0 (query)              3_411.15        76.94     3_488.09       0.9997     0.000021       169.78
NNDescent-nt:auto-dp0 (self)                      3_411.15       752.44     4_163.58       0.9999     0.000023       169.78
NNDescent-nt:auto-s:auto-dp0.25 (query)           3_287.41        73.98     3_361.39       0.9995     0.000036       172.51
NNDescent-nt:auto-dp0.25 (self)                   3_287.41       719.20     4_006.60       0.9997     0.000034       172.51
NNDescent-nt:auto-s:auto-dp0.5 (query)            3_351.53        75.95     3_427.48       0.9991     0.000054       168.70
NNDescent-nt:auto-dp0.5 (self)                    3_351.53       705.93     4_057.46       0.9994     0.000055       168.70
NNDescent-nt:auto-s:auto-dp1 (query)              3_300.28        70.90     3_371.18       0.9973     0.000203       164.47
NNDescent-nt:auto-dp1 (self)                      3_300.28       683.60     3_983.87       0.9976     0.000195       164.47
---------------------------------------------------------------------------------------------------------------------------
```
</details>

---

<details>
<summary><b>NNDescent - Euclidean (LowRank)</b>:</summary>
</br>
```
===========================================================================================================================
Benchmark: 150k cells, 32D
===========================================================================================================================
Method                                          Build (ms)   Query (ms)   Total (ms)     Recall@k   Dist Error    Size (MB)
---------------------------------------------------------------------------------------------------------------------------
Exhaustive (query)                                    3.03     2_367.97     2_371.01       1.0000     0.000000        18.31
Exhaustive (self)                                     3.03    23_592.91    23_595.95       1.0000     0.000000        18.31
NNDescent-nt12-s:auto-dp0 (query)                 1_543.64        75.60     1_619.23       0.9996     0.000390       137.18
NNDescent-nt12-dp0 (self)                         1_543.64       771.61     2_315.24       0.9996     0.000337       137.18
NNDescent-nt24-s:auto-dp0 (query)                 2_106.15        75.90     2_182.06       1.0000     0.000029       165.65
NNDescent-nt24-dp0 (self)                         2_106.15       726.39     2_832.54       1.0000     0.000033       165.65
NNDescent-nt:auto-s75-dp0 (query)                 2_132.77       102.39     2_235.16       1.0000     0.000011       165.77
NNDescent-nt:auto-s100-dp0 (query)                2_132.77       133.97     2_266.73       1.0000     0.000003       165.77
NNDescent-nt:auto-s:auto-dp0 (query)              2_132.77        74.57     2_207.34       1.0000     0.000021       165.77
NNDescent-nt:auto-dp0 (self)                      2_132.77       728.68     2_861.45       1.0000     0.000026       165.77
NNDescent-nt:auto-s:auto-dp0.25 (query)           2_243.97        76.30     2_320.28       1.0000     0.000021       170.35
NNDescent-nt:auto-dp0.25 (self)                   2_243.97       719.23     2_963.21       1.0000     0.000026       170.35
NNDescent-nt:auto-s:auto-dp0.5 (query)            2_242.21        74.94     2_317.14       1.0000     0.000021       170.35
NNDescent-nt:auto-dp0.5 (self)                    2_242.21       720.06     2_962.26       1.0000     0.000026       170.35
NNDescent-nt:auto-s:auto-dp1 (query)              2_270.50        74.79     2_345.29       1.0000     0.000021       170.35
NNDescent-nt:auto-dp1 (self)                      2_270.50       719.15     2_989.65       1.0000     0.000026       170.35
---------------------------------------------------------------------------------------------------------------------------
```
</details>

*All benchmarks were run on M1 Max MacBook Pro with 64 GB unified memory.*